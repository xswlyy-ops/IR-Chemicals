<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lab Barcode Scanner</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <style>
    body { font-family: Arial; padding: 15px; }
    #reader { width: 320px; margin-bottom: 10px; }
    input, button { width: 100%; padding: 8px; margin: 6px 0; }
  </style>
</head>
<body>

<h3>ğŸ“¦ å®éªŒå®¤æ¡å½¢ç å½•å…¥</h3>

<div id="reader"></div>
<button onclick="switchCamera()">ğŸ” åˆ‡æ¢æ‘„åƒå¤´</button>

<label>ç¼–å·ï¼ˆå¯ä¿®æ”¹ï¼‰</label>
<input id="codeInput" placeholder="æ‰«ææ¡å½¢ç æˆ–æ‰‹åŠ¨è¾“å…¥">

<label>è¯å“åç§°</label>
<input id="nameInput" placeholder="è¯å“åç§°">

<label>å­˜æ”¾ä½ç½®</label>
<input id="locationInput" placeholder="å¦‚ï¼šå†·è—æŸœB-1">

<script>
  const html5QrCode = new Html5Qrcode("reader");
  let facingMode = "environment"; // é»˜è®¤åç½®

  function startScanner() {
    html5QrCode.start(
      { facingMode: facingMode },
      {
        fps: 10,
        qrbox: { width: 300, height: 120 }, // æ¡å½¢ç ç”¨â€œæ¨ªæ¡†â€
        formatsToSupport: [
          Html5QrcodeSupportedFormats.CODE_128,
          Html5QrcodeSupportedFormats.EAN_13,
          Html5QrcodeSupportedFormats.EAN_8,
          Html5QrcodeSupportedFormats.UPC_A,
          Html5QrcodeSupportedFormats.UPC_E
        ]
      },
      (decodedText) => {
        document.getElementById("codeInput").value = decodedText;
      }
    );
  }

  function switchCamera() {
    html5QrCode.stop().then(() => {
      facingMode = facingMode === "environment" ? "user" : "environment";
      startScanner();
    });
  }

  startScanner();
</script>

</body>
</html>
